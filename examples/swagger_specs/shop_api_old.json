{"openapi":"3.0.0","paths":{"/categories":{"post":{"description":"Create a new product category in the system. This endpoint validates that both the name and slug are unique (case-insensitive) before creating the category. The parentId is optional and can be used to create hierarchical category structures. If parentId is provided, it will be converted to an integer. This endpoint is protected and requires admin permissions. The category will be created with the provided data and returned with all fields including the generated ID and timestamps. The system performs comprehensive validation including slug uniqueness, name uniqueness, and proper data type conversion for hierarchical relationships.","operationId":"CategoryAIController_create","parameters":[],"requestBody":{"required":true,"description":"Category creation data. Both the slug and name fields must be unique across all categories (case-insensitive). The system uses PostgreSQL LOWER() function for case-insensitive validation. parentId is optional and creates hierarchical structure. The parentId will be converted to integer if provided. All fields are validated before processing.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoryDto"},"examples":{"Basic Category":{"summary":"Create basic category","description":"Create a simple category without parent","value":{"name":"Electronics","slug":"electronics","description":"Electronic devices and gadgets","image":"electronics.jpg","isActive":true,"sortOrder":1}},"Subcategory":{"summary":"Create subcategory","description":"Create a category with parent (subcategory)","value":{"name":"Smartphones","slug":"smartphones","description":"Mobile phones and smartphones","image":"smartphones.jpg","parentId":"1","isActive":true,"sortOrder":2}}}}}},"responses":{"201":{"description":"Category created successfully. Returns the complete category object with ID, timestamps, and all provided fields. The response includes all category metadata and hierarchical information.","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"1"},"name":{"type":"string","example":"Electronics"},"slug":{"type":"string","example":"electronics"},"description":{"type":"string","example":"Electronic devices and gadgets"},"image":{"type":"string","example":"electronics.jpg"},"parentId":{"type":"number","example":null},"isActive":{"type":"boolean","example":true},"sortOrder":{"type":"number","example":1},"createdAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00.000Z"},"updatedAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00.000Z"}}}}}},"400":{"description":"Bad Request - Slug already exists, category name already exists, or invalid input data. Both the slug and name must be unique across all categories (case-insensitive). The system performs case-insensitive validation using PostgreSQL LOWER() function. Check the request body format and ensure all required fields are provided correctly. Validation errors include duplicate slug/name detection and data type validation."},"401":{"description":"Unauthorized - Authentication token is missing, invalid, or expired. User must be logged in with admin permissions. The endpoint requires a valid JWT token with admin role."},"403":{"description":"Forbidden - User does not have sufficient permissions to create categories. Admin role required. The PermissionGuard validates user permissions against the ResourceType.CATEGORIES with PermissionAction.CREATE."}},"security":[{"bearer":[]}],"summary":"Create a new category (Admin only)","tags":["Categories - AI Integration"]},"get":{"description":"Retrieve all product categories from the system. This endpoint is publicly accessible and does not require authentication. Categories can be filtered by isActive status and parentId. If no filters are provided, all categories are returned. The response includes all category fields including hierarchical relationships through parentId. This endpoint is used by the frontend to display category navigation and product filtering options. The system supports flexible filtering and returns complete category metadata.","operationId":"CategoryAIController_findAll","parameters":[{"name":"isActive","required":false,"in":"query","description":"Filter categories by active status. If true, returns only active categories. If false, returns only inactive categories. If not provided, returns all categories.","schema":{"example":true,"type":"boolean"}},{"name":"parentId","required":false,"in":"query","description":"Filter categories by parent ID. Returns only subcategories of the specified parent category. If null, returns only top-level categories.","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"Categories retrieved successfully. Returns an array of category objects with complete information including hierarchical structure. Each category includes all metadata fields and relationship information.","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","example":"1"},"name":{"type":"string","example":"Electronics"},"slug":{"type":"string","example":"electronics"},"description":{"type":"string","example":"Electronic devices and gadgets"},"image":{"type":"string","example":"electronics.jpg"},"parentId":{"type":"number","example":null},"isActive":{"type":"boolean","example":true},"sortOrder":{"type":"number","example":1},"createdAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00.000Z"},"updatedAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00.000Z"}}}}}}},"404":{"description":"No categories found matching the provided filters. This may happen if all categories are inactive or if parentId filter returns no results. The system returns 404 when the filter criteria produce no matches."}},"security":[{"bearer":[]}],"summary":"Get all categories (Public)","tags":["Categories - AI Integration"]}},"/categories/{id}":{"get":{"description":"Retrieve a specific product category by its unique ID. This endpoint is publicly accessible and does not require authentication. Returns complete category information including all fields and metadata. If the category is not found, a 404 error is returned. This endpoint is used by the frontend to display detailed category information and for category-specific product listings. The system performs ID validation and returns comprehensive category data.","operationId":"CategoryAIController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"Unique category identifier. Must be a valid category ID that exists in the system.","schema":{"example":"1","type":"string"}}],"responses":{"200":{"description":"Category retrieved successfully. Returns the complete category object with all fields and metadata. Includes hierarchical information and relationship data.","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"1"},"name":{"type":"string","example":"Electronics"},"slug":{"type":"string","example":"electronics"},"description":{"type":"string","example":"Electronic devices and gadgets"},"image":{"type":"string","example":"electronics.jpg"},"parentId":{"type":"number","example":null},"isActive":{"type":"boolean","example":true},"sortOrder":{"type":"number","example":1},"createdAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00.000Z"},"updatedAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00.000Z"}}}}}},"404":{"description":"Category not found. The specified category ID does not exist in the system. Check the ID parameter and ensure it is correct. The system performs ID validation before returning category data."}},"security":[{"bearer":[]}],"summary":"Get a category by ID (Public)","tags":["Categories - AI Integration"]},"patch":{"description":"Update an existing product category by its ID. This endpoint validates that the category exists before updating. The update includes optimistic concurrency control - if the updatedAt timestamp does not match the current category timestamp, the update is rejected to prevent conflicts. If name or slug are being updated, they are validated for uniqueness (case-insensitive) against other categories. The parentId field is optional and will be converted to an integer if provided. This endpoint is protected and requires admin permissions. Only the fields provided in the request body will be updated. The system performs comprehensive validation including conflict detection and data integrity checks.","operationId":"CategoryAIController_update","parameters":[{"name":"id","required":true,"in":"path","description":"Unique category identifier to update. Must be a valid category ID that exists in the system.","schema":{"example":"1","type":"string"}}],"requestBody":{"required":true,"description":"Category update data. Only include the fields you want to update. All fields are optional. The parentId will be converted to integer if provided. The system performs case-insensitive validation for name and slug uniqueness.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCategoryDto"},"examples":{"Update Name":{"summary":"Update category name","description":"Update only the category name","value":{"name":"Electronics Updated"}},"Update Multiple Fields":{"summary":"Update multiple fields","description":"Update name, description, and active status","value":{"name":"Electronics Updated","description":"Updated electronic devices and gadgets","isActive":true}},"Change Parent":{"summary":"Change category parent","description":"Move category to different parent","value":{"parentId":"2"}}}}}},"responses":{"200":{"description":"Category updated successfully. Returns the complete updated category object with all fields and new timestamps. The response includes updated metadata and relationship information.","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"1"},"name":{"type":"string","example":"Electronics Updated"},"slug":{"type":"string","example":"electronics-updated"},"description":{"type":"string","example":"Updated electronic devices and gadgets"},"image":{"type":"string","example":"electronics-updated.jpg"},"parentId":{"type":"number","example":null},"isActive":{"type":"boolean","example":true},"sortOrder":{"type":"number","example":1},"createdAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00.000Z"},"updatedAt":{"type":"string","format":"date-time","example":"2024-01-15T11:30:00.000Z"}}}}}},"400":{"description":"Bad Request - Invalid input data or optimistic concurrency conflict. Check the request body format and ensure all field validations pass. If updatedAt timestamp conflict occurs, refresh the page and try again. The system validates data integrity and conflict resolution."},"401":{"description":"Unauthorized - Authentication token is missing, invalid, or expired. User must be logged in with admin permissions."},"403":{"description":"Forbidden - User does not have sufficient permissions to update categories. Admin role required."},"404":{"description":"Category not found. The specified category ID does not exist in the system. Check the ID parameter and ensure it is correct."},"409":{"description":"Conflict - This category has been updated by another user. Please refresh the page and try again. This prevents concurrent modification conflicts. The optimistic concurrency control prevents data corruption."}},"security":[{"bearer":[]}],"summary":"Update a category by ID (Admin only)","tags":["Categories - AI Integration"]},"delete":{"description":"Permanently delete a product category by its ID. This action cannot be undone. The endpoint first validates that the category exists before deletion. If the category is successfully deleted, a confirmation message is returned. This endpoint is protected and requires admin permissions. Use with caution as this will remove the category and may affect products associated with it. The system performs existence validation and permanent removal.","operationId":"CategoryAIController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"Unique category identifier to delete. Must be a valid category ID that exists in the system.","schema":{"example":"1","type":"string"}}],"responses":{"200":{"description":"Category deleted successfully. Returns a confirmation message. The category has been permanently removed from the system.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Category deleted successfully","description":"Confirmation message indicating successful deletion"}}}}}},"400":{"description":"Bad Request - Invalid category ID or deletion failed. Check the ID parameter and ensure it is correct."},"401":{"description":"Unauthorized - Authentication token is missing, invalid, or expired. User must be logged in with admin permissions."},"403":{"description":"Forbidden - User does not have sufficient permissions to delete categories. Admin role required."},"404":{"description":"Category not found. The specified category ID does not exist in the system. Check the ID parameter and ensure it is correct."}},"security":[{"bearer":[]}],"summary":"Delete a category by ID (Admin only)","tags":["Categories - AI Integration"]}}},"info":{"title":"Clickone Shop API - AI Integration","description":"Comprehensive API documentation for AI integrations and automated systems. Includes detailed technical descriptions, error handling, validation rules, and business logic explanations. This documentation focuses on Categories module with detailed technical specifications.","version":"1.0","contact":{}},"tags":[],"servers":[{"url":"http://localhost:3030/api","description":"Development server"}],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"CreateCategoryDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the category","example":"Category 1"},"slug":{"type":"string","description":"Slug of the category","example":"category-1"},"description":{"type":"string","description":"Description of the category","example":"Description of category 1"},"image":{"type":"string","description":"Image of the category","example":"image.jpg"},"parentId":{"type":"string","description":"Parent ID of the category","example":"1"},"isActive":{"type":"boolean","description":"Is active","example":true},"sortOrder":{"type":"number","description":"Sort order","example":1}},"required":["name","slug"]},"UpdateCategoryDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the category","example":"Category 1"},"slug":{"type":"string","description":"Slug of the category","example":"category-1"},"description":{"type":"string","description":"Description of the category","example":"Description of category 1"},"image":{"type":"string","description":"Image of the category","example":"image.jpg"},"parentId":{"type":"string","description":"Parent ID of the category","example":"1"},"isActive":{"type":"boolean","description":"Is active","example":true},"sortOrder":{"type":"number","description":"Sort order","example":1}}}}}}