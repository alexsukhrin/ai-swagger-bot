{"openapi":"3.0.0","paths":{"/api/categories":{"post":{"description":"Create a new product category in the system. Validates unique name and slug.","operationId":"CategoryAIController_create","parameters":[],"requestBody":{"required":true,"description":"Category creation data. Name and slug must be unique.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoryDto"},"examples":{"Basic Category":{"summary":"Create basic category","value":{"name":"Electronics","slug":"electronics","description":"Electronic devices and gadgets","image":"electronics.jpg","isActive":true,"sortOrder":1}},"Subcategory":{"summary":"Create subcategory","value":{"name":"Smartphones","slug":"smartphones","description":"Mobile phones and smartphones","image":"smartphones.jpg","parentId":"1","isActive":true,"sortOrder":2}}}}}},"responses":{"201":{"description":"Category created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoryDto"}}}},"400":{"description":"Bad Request - Slug or name already exists"},"401":{"description":"Unauthorized - Authentication required"},"403":{"description":"Forbidden - Admin permissions required"}},"security":[{"bearer":[]}],"summary":"Create a new category (Admin only)","tags":["AI Categories"]},"get":{"description":"Retrieve all product categories. Supports filtering by status and parent.","operationId":"CategoryAIController_findAll","parameters":[{"name":"isActive","required":false,"in":"query","description":"Filter by active status","schema":{"example":true,"type":"boolean"}},{"name":"parentId","required":false,"in":"query","description":"Filter by parent category ID","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"Categories retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CreateCategoryDto"}}}}},"404":{"description":"No categories found"}},"security":[{"bearer":[]}],"summary":"Get all categories (Public)","tags":["AI Categories"]}},"/api/categories/{id}":{"get":{"description":"Retrieve a specific category by its ID","operationId":"CategoryAIController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"Category ID","schema":{"example":"1","type":"string"}}],"responses":{"200":{"description":"Category retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoryDto"}}}},"404":{"description":"Category not found"}},"security":[{"bearer":[]}],"summary":"Get a category by ID (Public)","tags":["AI Categories"]},"patch":{"description":"Update an existing category. Supports partial updates.","operationId":"CategoryAIController_update","parameters":[{"name":"id","required":true,"in":"path","description":"Category ID to update","schema":{"example":"1","type":"string"}}],"requestBody":{"required":true,"description":"Category update data. Only include fields to update.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCategoryDto"},"examples":{"Update Name":{"summary":"Update category name","value":{"name":"Electronics Updated"}},"Update Multiple Fields":{"summary":"Update multiple fields","value":{"name":"Electronics Updated","description":"Updated electronic devices and gadgets","isActive":true}}}}}},"responses":{"200":{"description":"Category updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoryDto"}}}},"400":{"description":"Bad Request - Invalid data"},"401":{"description":"Unauthorized - Authentication required"},"403":{"description":"Forbidden - Admin permissions required"},"404":{"description":"Category not found"},"409":{"description":"Conflict - Category was updated by another user"}},"security":[{"bearer":[]}],"summary":"Update a category by ID (Admin only)","tags":["AI Categories"]},"delete":{"description":"Permanently delete a category. This action cannot be undone.","operationId":"CategoryAIController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"Category ID to delete","schema":{"example":"1","type":"string"}}],"responses":{"200":{"description":"Category deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Category deleted successfully"}}}}}},"400":{"description":"Bad Request - Invalid category ID"},"401":{"description":"Unauthorized - Authentication required"},"403":{"description":"Forbidden - Admin permissions required"},"404":{"description":"Category not found"}},"security":[{"bearer":[]}],"summary":"Delete a category by ID (Admin only)","tags":["AI Categories"]}}},"info":{"title":"Clickone Shop Backend API","description":"API for Clickone Shop Backend","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"CreateProductDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the product","example":"iPhone 15 Pro"},"price":{"type":"number","description":"Price of the product","example":999.99,"minimum":0},"description":{"type":"string","description":"Product description","example":"Latest iPhone model with advanced features"},"sku":{"type":"string","description":"SKU - unique product identifier","example":"IPHONE-15-PRO-256GB-BLUE"},"categoryId":{"type":"string","description":"Category ID","example":"123e4567-e89b-12d3-a456-426614174000"},"stock":{"type":"boolean","description":"Product availability in stock","example":true},"status":{"type":"string","description":"Product status","enum":["active","draft","archived"],"example":"active","default":"draft"},"familyId":{"type":"string","description":"Product family ID for grouping","example":"123e4567-e89b-12d3-a456-426614174000"},"image":{"type":"string","description":"Product image file","format":"binary"},"comparePrice":{"type":"number","description":"Compare price for discounts","example":1199.99},"translations":{"type":"object","description":"Product translations","example":{"en":{"name":"iPhone 15 Pro","description":"Latest iPhone model"}}},"seoTitle":{"type":"string","description":"SEO title","example":"iPhone 15 Pro - Best Price"},"seoDescription":{"type":"string","description":"SEO description","example":"Buy iPhone 15 Pro with best price guarantee"},"weight":{"type":"number","description":"Product weight in grams","example":221},"dimensions":{"type":"object","description":"Product dimensions","example":{"length":15.6,"width":7.8,"height":0.8}},"brandId":{"type":"string","description":"Brand ID","example":"123e4567-e89b-12d3-a456-426614174000"},"attributes":{"description":"IDs of attributes linked to the product","example":["123e4567-e89b-12d3-a456-426614174000","456e7890-e89b-12d3-a456-426614174000"],"type":"array","items":{"type":"string"}},"selectedOptions":{"description":"Selected attribute option IDs","example":["123e4567-e89b-12d3-a456-426614174000","456e7890-e89b-12d3-a456-426614174000"],"type":"array","items":{"type":"string"}}},"required":["name","price","sku","categoryId","stock","status","selectedOptions"]},"UpdateProductDto":{"type":"object","properties":{}},"UserResponseDto":{"type":"object","properties":{}},"AdminUsersResponseDto":{"type":"object","properties":{"users":{"description":"List of users","type":"array","items":{"$ref":"#/components/schemas/UserResponseDto"}},"total":{"type":"number","description":"Total number of users","example":150},"page":{"type":"number","description":"Current page number","example":1},"limit":{"type":"number","description":"Number of items per page","example":10},"filters":{"type":"object","description":"Applied filters","example":{"search":"john","role":"admin","status":"active"}},"pagination":{"type":"object","description":"Pagination metadata","example":{"pagination":{"page":1,"limit":10,"total":150,"totalPages":15,"hasNextPage":true,"hasPreviousPage":false}}}},"required":["users","total","page","limit","filters","pagination"]},"AdminResponseDto":{"type":"object","properties":{}},"AdminAdminsResponseDto":{"type":"object","properties":{"admins":{"description":"List of admins","type":"array","items":{"$ref":"#/components/schemas/AdminResponseDto"}},"total":{"type":"number","description":"Total number of admins","example":25},"page":{"type":"number","description":"Current page number","example":1},"limit":{"type":"number","description":"Number of items per page","example":10},"filters":{"type":"object","description":"Applied filters","example":{"search":"john","role":"admin","status":"active","department":"IT"}},"pagination":{"type":"object","description":"Pagination metadata","example":{"pagination":{"page":1,"limit":10,"total":25,"totalPages":3,"hasNextPage":true,"hasPreviousPage":false}}}},"required":["admins","total","page","limit","filters","pagination"]},"UpdatePermissionsDto":{"type":"object","properties":{"permissions":{"type":"object","description":"Permissions object with resource as key and actions as value","example":{"products":{"create":true,"read":true,"update":true,"delete":false},"orders":{"create":false,"read":true,"update":true,"delete":false},"customers":{"create":false,"read":true,"update":false,"delete":false},"users":{"create":false,"read":false,"update":false,"delete":false},"analytics":{"create":false,"read":true,"update":false,"delete":false},"settings":{"create":false,"read":false,"update":false,"delete":false},"admins":{"create":false,"read":false,"update":false,"delete":false}}},"notes":{"type":"string","description":"Notes about permission changes","example":"Updated permissions for new role assignment"}},"required":["permissions"]},"CreateCustomerAdminDto":{"type":"object","properties":{"email":{"type":"string","description":"Customer email address","example":"john.doe@example.com"},"firstName":{"type":"string","description":"Customer first name","example":"John"},"lastName":{"type":"string","description":"Customer last name","example":"Doe"},"phone":{"type":"string","description":"Customer phone number","example":"+380501234567"},"dateOfBirth":{"type":"string","description":"Customer date of birth","example":"1990-01-01"},"gender":{"type":"string","description":"Customer gender","enum":["male","female","other"]},"status":{"type":"string","description":"Customer status","enum":["active","inactive","blocked"],"example":"active"},"segment":{"type":"string","description":"Customer segment","enum":["vip","regular","new","inactive"],"example":"regular"},"marketingConsent":{"type":"boolean","description":"Marketing consent","example":false},"preferredLanguage":{"type":"string","description":"Preferred language","example":"uk"},"preferredCurrency":{"type":"string","description":"Preferred currency","example":"UAH"},"tags":{"description":"Customer tags","example":["new","potential"],"type":"array","items":{"type":"string"}},"addresses":{"type":"array","description":"Customer addresses","items":{"type":"object","properties":{"type":{"type":"string","enum":["shipping","billing","both"],"example":"shipping"},"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"company":{"type":"string","example":"Company Ltd","nullable":true},"address1":{"type":"string","example":"Shevchenko St. 1"},"address2":{"type":"string","example":"Apt 5","nullable":true},"city":{"type":"string","example":"Kyiv"},"state":{"type":"string","example":"Kyiv"},"postalCode":{"type":"string","example":"01001"},"country":{"type":"string","example":"Ukraine"},"phone":{"type":"string","example":"+380501234567","nullable":true}}}}},"required":["email","firstName","lastName"]},"CustomerResponseDto":{"type":"object","properties":{}},"UpdateCustomerDto":{"type":"object","properties":{"email":{"type":"string","description":"Customer email","example":"john.doe@example.com"},"firstName":{"type":"string","description":"Customer first name","example":"John"},"lastName":{"type":"string","description":"Customer last name","example":"Doe"},"phone":{"type":"string","description":"Customer phone number","example":"+380501234567"},"dateOfBirth":{"type":"string","description":"Customer date of birth","example":"1990-01-01"},"gender":{"type":"string","description":"Customer gender","enum":["male","female","other"]},"status":{"type":"string","description":"Customer status","enum":["active","inactive","blocked"]},"emailVerified":{"type":"boolean","description":"Whether email is verified","example":true},"phoneVerified":{"type":"boolean","description":"Whether phone is verified","example":true},"segment":{"type":"string","description":"Customer segment","enum":["vip","regular","new","inactive"]},"marketingConsent":{"type":"boolean","description":"Marketing consent","example":true},"preferredLanguage":{"type":"string","description":"Preferred language","example":"uk"},"preferredCurrency":{"type":"string","description":"Preferred currency","example":"UAH"},"tags":{"description":"Customer tags","example":["vip","loyal"],"type":"array","items":{"type":"string"}}}},"AdminUpdateUserRolesDto":{"type":"object","properties":{"roles":{"description":"Array of roles to assign to the user","example":["admin","manager"],"type":"array","items":{"type":"string"}}},"required":["roles"]},"UpdateUserRolesDto":{"type":"object","properties":{"roles":{"description":"Array of roles to assign to the user","example":["admin","user"],"minItems":1,"items":{"type":"array"},"type":"array"}},"required":["roles"]},"AddRoleDto":{"type":"object","properties":{"role":{"type":"string","description":"Role to add to the user","example":"admin","enum":["admin","manager","user","moderator"]}},"required":["role"]},"CreateWarehouseOperationDto":{"type":"object","properties":{"warehouseId":{"type":"string","description":"Warehouse ID"},"type":{"type":"string","enum":["addition","writeOff","lowStockChange"],"description":"Type of warehouse operation"},"supplierAddition":{"type":"number","description":"Quantity added by supplier"},"inventoryWriteOff":{"type":"number","description":"Quantity written off from inventory"},"lowStockThreshold":{"type":"number","description":"Updated low stock threshold"},"beforeQuantity":{"type":"number","description":"Quantity before the operation"},"afterQuantity":{"type":"number","description":"Quantity after the operation"},"costPrice":{"type":"number","description":"Cost price of the product"},"comment":{"type":"string","description":"Optional comment for the operation"},"performedBy":{"type":"string","description":"User who performed the operation"}},"required":["warehouseId","type","performedBy"]},"CreateCategoryDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the category","example":"Category 1"},"slug":{"type":"string","description":"Slug of the category","example":"category-1"},"description":{"type":"string","description":"Description of the category","example":"Description of category 1"},"image":{"type":"string","description":"Image of the category","example":"image.jpg"},"parentId":{"type":"string","description":"Parent ID of the category","example":"1"},"isActive":{"type":"boolean","description":"Is active","example":true},"sortOrder":{"type":"number","description":"Sort order","example":1}},"required":["name","slug"]},"UpdateCategoryDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the category","example":"Category 1"},"slug":{"type":"string","description":"Slug of the category","example":"category-1"},"description":{"type":"string","description":"Description of the category","example":"Description of category 1"},"image":{"type":"string","description":"Image of the category","example":"image.jpg"},"parentId":{"type":"string","description":"Parent ID of the category","example":"1"},"isActive":{"type":"boolean","description":"Is active","example":true},"sortOrder":{"type":"number","description":"Sort order","example":1}}},"OrderItemDto":{"type":"object","properties":{"productId":{"type":"string","example":"11fcf013-c637-447b-a0c6-1ce1cb1b97d3"},"quantity":{"type":"number"},"price":{"type":"number"},"total":{"type":"number"}},"required":["productId","quantity","price","total"]},"AddressDto":{"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"company":{"type":"string"},"address1":{"type":"string"},"address2":{"type":"string"},"city":{"type":"string"},"state":{"type":"string"},"postalCode":{"type":"string"},"country":{"type":"string"},"phone":{"type":"string"}},"required":["firstName","lastName","company","address1","address2","city","state","postalCode","country","phone"]},"CreateOrderDto":{"type":"object","properties":{"orderNumber":{"type":"string"},"customerId":{"type":"string"},"status":{"type":"string","enum":["pending","confirmed","processing","shipped","delivered","cancelled","returned"]},"paymentStatus":{"type":"string","enum":["pending","paid","failed","refunded"]},"paymentMethod":{"type":"string","enum":["card","cash","bank_transfer","paypal","apple_pay","google_pay"]},"shippingMethod":{"type":"string","enum":["standard","express","pickup"]},"items":{"type":"array","items":{"$ref":"#/components/schemas/OrderItemDto"}},"subTotal":{"type":"number"},"shippingCost":{"type":"number"},"taxAmount":{"type":"number"},"discountAmount":{"type":"number"},"total":{"type":"number"},"currency":{"type":"string"},"shippingAddress":{"$ref":"#/components/schemas/AddressDto"},"billingAddress":{"$ref":"#/components/schemas/AddressDto"},"notes":{"type":"string"},"trackingNumber":{"type":"string"},"deliveredAt":{"type":"string"},"customerNotes":{"type":"string"},"adminNotes":{"type":"string"}},"required":["orderNumber","customerId","status","paymentStatus","paymentMethod","shippingMethod","items","subTotal","shippingCost","taxAmount","discountAmount","total","currency","shippingAddress","billingAddress","notes","trackingNumber","deliveredAt","customerNotes","adminNotes"]},"UpdateOrderDto":{"type":"object","properties":{}},"CreateAttributeDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the attribute","example":"Attributes type 1"},"key":{"type":"string","description":"Key of the attribute","example":"attributes key 1"},"options":{"type":"array","items":{"type":"string"}},"required":{"type":"boolean"},"description":{"type":"string","description":"Hex code of the attribute","example":"code-1"}},"required":["name","key","options","required","description"]},"UpdateAttributeDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the attribute","example":"Attributes type 1"},"key":{"type":"string","description":"Key of the attribute","example":"attributes key 1"},"options":{"type":"array","items":{"type":"string"}},"required":{"type":"boolean"},"description":{"type":"string","description":"Hex code of the attribute","example":"code-1"}}},"CreateSettingDto":{"type":"object","properties":{"key":{"type":"string","description":"Name of the product setting","example":"Color"},"value":{"type":"string","description":"Value of the product setting","example":"Black"},"productId":{"type":"string","description":"Product ID","example":1}},"required":["key","value","productId"]},"UpdateSettingDto":{"type":"object","properties":{"key":{"type":"string","description":"Name of the product setting","example":"Color"},"value":{"type":"string","description":"Value of the product setting","example":"Black"},"productId":{"type":"string","description":"Product ID","example":1}}},"CreateFamilyDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the product family","example":"Product Family 1"},"description":{"type":"string","description":"Description of the product family","example":"Description of the product family 1"}},"required":["name"]},"UpdateFamilyDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the product family","example":"Product Family 1"},"description":{"type":"string","description":"Description of the product family","example":"Description of the product family 1"}}},"CollectionsDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the collection","example":"Summer Collection 2024"},"slug":{"type":"string","description":"URL-friendly slug for the collection","example":"summer-collection-2024"},"description":{"type":"string","description":"Description of the collection","example":"A curated collection of summer essentials for 2024"},"type":{"type":"string","description":"Type of collection","enum":["manual","automatic","seasonal"],"example":"manual"},"status":{"type":"string","description":"Status of the collection","enum":["active","inactive","scheduled"],"example":"active"},"productsCount":{"type":"number","description":"Number of products in the collection","example":25,"minimum":0},"startDate":{"type":"string","description":"Start date for the collection (ISO 8601 format)","example":"2024-06-01T00:00:00.000Z"},"endDate":{"type":"string","description":"End date for the collection (ISO 8601 format)","example":"2024-08-31T23:59:59.999Z"},"conditions":{"description":"Array of conditions for automatic collections","example":["category:electronics","price:gte:100"],"type":"array","items":{"type":"string"}},"image":{"type":"string","description":"Image URL for the collection","example":"https://example.com/collection-image.jpg"},"createdAt":{"type":"string","description":"Creation timestamp (auto-generated)","example":"2024-01-15T10:30:00.000Z"},"updatedAt":{"type":"string","description":"Last update timestamp (auto-generated)","example":"2024-01-15T10:30:00.000Z"}},"required":["name","slug","type","status","productsCount"]},"AddProductsToCollectionDto":{"type":"object","properties":{"productIds":{"description":"Array of product IDs to add to the collection","example":[1,2,3],"type":"array","items":{"type":"number"}}},"required":["productIds"]},"RemoveProductsFromCollectionDto":{"type":"object","properties":{"productIds":{"description":"Array of product IDs to remove from the collection","example":[1,2,3],"type":"array","items":{"type":"string"}}},"required":["productIds"]},"UpdateProductOrderDto":{"type":"object","properties":{"productId":{"type":"string","description":"Product ID","example":1},"sortOrder":{"type":"number","description":"New sort order for the product","example":1}},"required":["productId","sortOrder"]},"CreateBrandDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the brand","example":"Victoria's Secret"},"slug":{"type":"string","description":"Slug of the brand","example":"victorias-secret"},"description":{"type":"string","description":"Description of the brand","example":"Американский бренд женского белья премиум-класса"},"country":{"type":"string","description":"Country of the brand","example":"США"},"logo":{"type":"string","description":"Logo of the brand","example":"https://victoriassecret.com"},"website":{"type":"string","description":"Website of the brand","example":"https://victoriassecret.com"},"status":{"type":"string","description":"Status of the brand","example":"active","enum":["active","inactive"]},"productsCount":{"type":"number","description":"Count of the brands","example":3}},"required":["name","slug","status","productsCount"]},"UpdateBrandDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the brand","example":"Victoria's Secret"},"slug":{"type":"string","description":"Slug of the brand","example":"victorias-secret"},"description":{"type":"string","description":"Description of the brand","example":"Американский бренд женского белья премиум-класса"},"country":{"type":"string","description":"Country of the brand","example":"США"},"logo":{"type":"string","description":"Logo of the brand","example":"https://victoriassecret.com"},"website":{"type":"string","description":"Website of the brand","example":"https://victoriassecret.com"},"status":{"type":"string","description":"Status of the brand","example":"active","enum":["active","inactive"]},"productsCount":{"type":"number","description":"Count of the brands","example":3}}},"CreateCustomerDto":{"type":"object","properties":{}},"CustomerEntity":{"type":"object","properties":{}},"UpdateCustomerProfileDto":{"type":"object","properties":{"firstName":{"type":"string","description":"Customer first name","example":"John"},"lastName":{"type":"string","description":"Customer last name","example":"Doe"},"phone":{"type":"string","description":"Customer phone number","example":"+380501234567"},"dateOfBirth":{"type":"string","description":"Customer date of birth","example":"1990-01-01"},"gender":{"type":"string","description":"Customer gender","enum":["male","female","other"]},"marketingConsent":{"type":"boolean","description":"Marketing consent","example":true},"preferredLanguage":{"type":"string","description":"Preferred language","example":"uk"},"preferredCurrency":{"type":"string","description":"Preferred currency","example":"UAH"},"addresses":{"description":"Customer addresses","type":"array","items":{"$ref":"#/components/schemas/AddressDto"}}}},"Auth0WebhookDto":{"type":"object","properties":{"sub":{"type":"string","description":"Auth0 user ID (sub)","example":"auth0|5f7c8ec7c33c6c004bbafe82"},"email":{"type":"string","description":"User email address","example":"user@example.com"},"name":{"type":"string","description":"Full name of the user","example":"John Doe"},"given_name":{"type":"string","description":"User first name","example":"John"},"family_name":{"type":"string","description":"User last name","example":"Doe"},"picture":{"type":"string","description":"User profile picture URL","example":"https://lh3.googleusercontent.com/a/example"},"nickname":{"type":"string","description":"User nickname","example":"johndoe"},"app_metadata":{"type":"object","description":"Auth0 app metadata","example":{}},"user_metadata":{"type":"object","description":"Auth0 user metadata","example":{}}},"required":["sub","email"]},"CompleteOrderDto":{"type":"object","properties":{"orderId":{"type":"string","description":"Order ID","example":"f38c9d3a-5ed2-4eb5-9481-ba1ee73f838d"},"trackingNumber":{"type":"string","description":"Tracking number for the order","example":"TRK123456789"},"deliveredAt":{"type":"string","description":"Delivery date","example":"2024-01-15T10:30:00.000Z"},"adminNotes":{"type":"string","description":"Admin notes about order completion","example":"Order delivered successfully to customer"}},"required":["orderId"]}}}}
