#!/usr/bin/env python3

import json

import requests


def test_admin_filters():
    """–¢–µ—Å—Ç—É—î —Ñ—ñ–ª—å—Ç—Ä–∏ –≤ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ"""

    base_url = "http://localhost:8000"

    print("üîç –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –≤ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ...")

    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ
    try:
        response = requests.get(f"{base_url}/admin/")
        if response.status_code == 200:
            print("‚úÖ –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞")
        else:
            print(f"‚ùå –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞: {response.status_code}")
            return
    except Exception as e:
        print(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ: {e}")
        return

    # –¢–µ—Å—Ç—É—î–º–æ —Ñ—ñ–ª—å—Ç—Ä–∏ –¥–ª—è –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω—ñ–≤
    print("\nüìã –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –¥–ª—è –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω—ñ–≤:")

    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏
    try:
        response = requests.get(f"{base_url}/admin/prompt-template/list")
        if response.status_code == 200:
            print("‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω—ñ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞")

            # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
            if "user_id" in response.text.lower():
                print("‚úÖ –§—ñ–ª—å—Ç—Ä –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –ø—Ä–∏—Å—É—Ç–Ω—ñ–π")
            else:
                print("‚ùå –§—ñ–ª—å—Ç—Ä –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ")

            if "category" in response.text.lower():
                print("‚úÖ –§—ñ–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø—Ä–∏—Å—É—Ç–Ω—ñ–π")
            else:
                print("‚ùå –§—ñ–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ")

            if "is_public" in response.text.lower():
                print("‚úÖ –§—ñ–ª—å—Ç—Ä –ø–æ –ø—É–±–ª—ñ—á–Ω–æ—Å—Ç—ñ –ø—Ä–∏—Å—É—Ç–Ω—ñ–π")
            else:
                print("‚ùå –§—ñ–ª—å—Ç—Ä –ø–æ –ø—É–±–ª—ñ—á–Ω–æ—Å—Ç—ñ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ")

        else:
            print(f"‚ùå –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω—ñ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞: {response.status_code}")
    except Exception as e:
        print(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω—ñ–≤: {e}")

    # –¢–µ—Å—Ç—É—î–º–æ —Ñ—ñ–ª—å—Ç—Ä–∏ –¥–ª—è Swagger —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ–π
    print("\nüìã –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –¥–ª—è Swagger —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ–π:")
    try:
        response = requests.get(f"{base_url}/admin/swagger-spec/list")
        if response.status_code == 200:
            print("‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∞ Swagger —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ–π –¥–æ—Å—Ç—É–ø–Ω–∞")

            if "user_id" in response.text.lower():
                print("‚úÖ –§—ñ–ª—å—Ç—Ä –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –ø—Ä–∏—Å—É—Ç–Ω—ñ–π")
            else:
                print("‚ùå –§—ñ–ª—å—Ç—Ä –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ")
        else:
            print(f"‚ùå –°—Ç–æ—Ä—ñ–Ω–∫–∞ Swagger —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞: {response.status_code}")
    except Exception as e:
        print(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ Swagger —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ–π: {e}")

    # –¢–µ—Å—Ç—É—î–º–æ —Ñ—ñ–ª—å—Ç—Ä–∏ –¥–ª—è —Å–µ—Å—ñ–π —á–∞—Ç—É
    print("\nüìã –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –¥–ª—è —Å–µ—Å—ñ–π —á–∞—Ç—É:")
    try:
        response = requests.get(f"{base_url}/admin/chat-session/list")
        if response.status_code == 200:
            print("‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∞ —Å–µ—Å—ñ–π —á–∞—Ç—É –¥–æ—Å—Ç—É–ø–Ω–∞")

            if "user_id" in response.text.lower():
                print("‚úÖ –§—ñ–ª—å—Ç—Ä –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –ø—Ä–∏—Å—É—Ç–Ω—ñ–π")
            else:
                print("‚ùå –§—ñ–ª—å—Ç—Ä –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ")
        else:
            print(f"‚ùå –°—Ç–æ—Ä—ñ–Ω–∫–∞ —Å–µ—Å—ñ–π —á–∞—Ç—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞: {response.status_code}")
    except Exception as e:
        print(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ —Å–µ—Å—ñ–π —á–∞—Ç—É: {e}")

    # –¢–µ—Å—Ç—É—î–º–æ —Ñ—ñ–ª—å—Ç—Ä–∏ –¥–ª—è API –≤–∏–∫–ª–∏–∫—ñ–≤
    print("\nüìã –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –¥–ª—è API –≤–∏–∫–ª–∏–∫—ñ–≤:")
    try:
        response = requests.get(f"{base_url}/admin/api-call/list")
        if response.status_code == 200:
            print("‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∞ API –≤–∏–∫–ª–∏–∫—ñ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞")

            if "user_id" in response.text.lower():
                print("‚úÖ –§—ñ–ª—å—Ç—Ä –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –ø—Ä–∏—Å—É—Ç–Ω—ñ–π")
            else:
                print("‚ùå –§—ñ–ª—å—Ç—Ä –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ")

            if "method" in response.text.lower():
                print("‚úÖ –§—ñ–ª—å—Ç—Ä –ø–æ –º–µ—Ç–æ–¥—É –ø—Ä–∏—Å—É—Ç–Ω—ñ–π")
            else:
                print("‚ùå –§—ñ–ª—å—Ç—Ä –ø–æ –º–µ—Ç–æ–¥—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ")
        else:
            print(f"‚ùå –°—Ç–æ—Ä—ñ–Ω–∫–∞ API –≤–∏–∫–ª–∏–∫—ñ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞: {response.status_code}")
    except Exception as e:
        print(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ API –≤–∏–∫–ª–∏–∫—ñ–≤: {e}")

    print("\n‚úÖ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")


if __name__ == "__main__":
    test_admin_filters()
