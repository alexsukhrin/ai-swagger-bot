#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –æ—á–∏—â–µ–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ—ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

echo "üîÑ –®–í–ò–î–ö–ò–ô –°–¢–ê–†–¢ - –û–ß–ò–©–ï–ù–ù–Ø –¢–ê –ü–ï–†–ï–Ü–ù–î–ï–ö–°–ê–¶–Ü–Ø"
echo "=" * 60

# –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å conda
if ! command -v conda &> /dev/null; then
    echo "‚ùå –ü–æ–º–∏–ª–∫–∞: conda –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"
    echo "üí° –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Miniconda –∞–±–æ Anaconda"
    exit 1
fi

# –ê–∫—Ç–∏–≤—É—î–º–æ conda —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
echo "üîß –ê–∫—Ç–∏–≤—É—î–º–æ conda —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ..."
source $HOME/miniconda3/etc/profile.d/conda.sh
conda activate ai-swagger

# –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –≤–µ—Ä—Å—ñ—é Python
echo "üêç –í–µ—Ä—Å—ñ—è Python: $(python --version)"

# –û—á–∏—â—É—î–º–æ –±–∞–∑—É –¥–∞–Ω–∏—Ö
echo "üßπ –û—á–∏—â–µ–Ω–Ω—è Chroma –±–∞–∑–∏ –¥–∞–Ω–∏—Ö..."
python scripts/clear_chroma_db.py --auto

# –ü–µ—Ä–µ—ñ–Ω–¥–µ–∫—Å—É—î–º–æ Swagger —Ñ–∞–π–ª–∏
echo "üîÑ –ü–µ—Ä–µ—ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—è Swagger —Ñ–∞–π–ª—ñ–≤..."
python scripts/reindex_swagger.py

echo ""
echo "‚úÖ –®–í–ò–î–ö–ò–ô –°–¢–ê–†–¢ –ó–ê–í–ï–†–®–ï–ù–û!"
echo "üí° –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –∑–∞–ø—É—Å–∫–∞—Ç–∏ —á–∞—Ç-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å: ./run_enhanced_chat.sh"
echo "üåê –ê–±–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ: http://localhost:8501"
