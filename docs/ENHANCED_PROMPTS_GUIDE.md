# –ü–æ–∫—Ä–∞—â–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–∏—Ö –ø—Ä–æ–º–ø—Ç—ñ–≤

## üéØ –û–≥–ª—è–¥

–ü–æ–∫—Ä–∞—â–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–ø—Ç—ñ–≤ –¥–æ–¥–∞—î –Ω–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–æ –±–∞–∑–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏:

- **–ú–µ—Ç–∞–¥–∞–Ω—ñ –ø—Ä–æ–º–ø—Ç—ñ–≤** - –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ–∂–µ–Ω –ø—Ä–æ–º–ø—Ç
- **–†–µ—î—Å—Ç—Ä –ø—Ä–æ–º–ø—Ç—ñ–≤** - —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –æ–ø–∏—Å—ñ–≤
- **–®–∞–±–ª–æ–Ω–∏ –ø—Ä–æ–º–ø—Ç—ñ–≤** - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—ñ–≤ –∑ –≥–æ—Ç–æ–≤–∏—Ö —à–∞–±–ª–æ–Ω—ñ–≤
- **–ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –ø—Ä–æ–º–ø—Ç—ñ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø—ñ–¥–±—ñ—Ä –Ω–∞–π–∫—Ä–∞—â–∏—Ö –ø—Ä–æ–º–ø—Ç—ñ–≤
- **–ï–∫—Å–ø–æ—Ä—Ç/—ñ–º–ø–æ—Ä—Ç** - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

```
src/
‚îú‚îÄ‚îÄ enhanced_prompt_manager.py    # –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–º–ø—Ç—ñ–≤
‚îú‚îÄ‚îÄ prompt_descriptions.py        # –û–ø–∏—Å–∏ —Ç–∞ –º–µ—Ç–∞–¥–∞–Ω—ñ –ø—Ä–æ–º–ø—Ç—ñ–≤
‚îú‚îÄ‚îÄ dynamic_prompt_manager.py     # –ë–∞–∑–æ–≤–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä (SQLite)
‚îî‚îÄ‚îÄ prompt_templates.py           # –°—Ç–∞—Ç–∏—á–Ω—ñ –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω–∏
```

### –ö–ª–∞—Å–∏ —Ç–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏

#### `EnhancedPromptManager`
–†–æ–∑—à–∏—Ä–µ–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–º–ø—Ç—ñ–≤ –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—è–º–∏.

**–û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏:**
- `add_enhanced_prompt()` - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—É –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
- `get_prompt_with_metadata()` - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—É –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
- `create_prompt_from_template()` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑ —à–∞–±–ª–æ–Ω—É
- `get_prompt_suggestions()` - –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –ø—Ä–æ–º–ø—Ç—ñ–≤
- `export_prompts_to_file()` - –µ–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–∞–π–ª
- `import_prompts_from_file()` - —ñ–º–ø–æ—Ä—Ç –∑ —Ñ–∞–π–ª—É

#### `PromptDescriptions`
–ö–æ–ª–µ–∫—Ü—ñ—è –æ–ø–∏—Å—ñ–≤ –ø—Ä–æ–º–ø—Ç—ñ–≤ –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏.

**–û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏:**
- `get_system_prompt_description()` - –æ–ø–∏—Å —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç—É
- `get_intent_analysis_description()` - –æ–ø–∏—Å –∞–Ω–∞–ª—ñ–∑—É –Ω–∞–º—ñ—Ä—É
- `get_error_handling_description()` - –æ–ø–∏—Å –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫
- `get_all_descriptions()` - –≤—Å—ñ –æ–ø–∏—Å–∏

#### `PromptRegistry`
–†–µ—î—Å—Ç—Ä –ø—Ä–æ–º–ø—Ç—ñ–≤ –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏.

**–û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏:**
- `register_custom_prompt()` - —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç—É
- `get_prompt_description()` - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–ø–∏—Å—É
- `get_prompt_metadata()` - –º–µ—Ç–∞–¥–∞–Ω—ñ –ø—Ä–æ–º–ø—Ç—É

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```python
from src.enhanced_prompt_manager import EnhancedPromptManager

# –°—Ç–≤–æ—Ä—é—î–º–æ –º–µ–Ω–µ–¥–∂–µ—Ä
manager = EnhancedPromptManager()

# –î–æ–¥–∞—î–º–æ –ø—Ä–æ–º–ø—Ç –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
from src.prompt_descriptions import PromptDescriptions

desc = PromptDescriptions.get_system_prompt_description()
prompt = EnhancedPromptTemplate(
    name="My System Prompt",
    description=desc.description,
    prompt_text="–¢–∏ –µ–∫—Å–ø–µ—Ä—Ç API...",
    category=desc.category.value,
    tags=desc.tags
)

prompt_id = manager.add_enhanced_prompt(prompt)
```

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑ —à–∞–±–ª–æ–Ω—É

```python
# –°—Ç–≤–æ—Ä—é—î–º–æ –ø—Ä–æ–º–ø—Ç –∑ –≥–æ—Ç–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω—É
template_id = manager.create_prompt_from_template(
    "intent_analysis",
    name="Custom Intent Analysis",
    prompt_text="–¢–∏ –µ–∫—Å–ø–µ—Ä—Ç API. –ê–Ω–∞–ª—ñ–∑—É–π –∑–∞–ø–∏—Ç: {user_query}",
    tags=["custom", "intent"]
)
```

### 3. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π

```python
# –û—Ç—Ä–∏–º—É—î–º–æ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –ø—Ä–æ–º–ø—Ç—ñ–≤ –¥–ª—è –∑–∞–ø–∏—Ç—É
suggestions = manager.get_prompt_suggestions("–ü–æ–∫–∞–∂–∏ –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏")

for suggestion in suggestions:
    print(f"–ü—Ä–æ–º–ø—Ç: {suggestion['name']}")
    print(f"–†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ—Å—Ç—å: {suggestion['relevance_score']:.2f}")
```

## üìä –ú–µ—Ç–∞–¥–∞–Ω—ñ –ø—Ä–æ–º–ø—Ç—ñ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö

```python
{
    "usage_count": 15,           # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—å
    "success_rate": 0.85,        # –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å (0-1)
    "created_at": "2024-01-01T12:00:00",
    "updated_at": "2024-01-15T14:30:00",
    "category": "data_retrieval",
    "tags": ["custom", "data"],
    "version": "1.0",
    "author": "system"
}
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö

```python
# –û—Ç—Ä–∏–º—É—î–º–æ –ø—Ä–æ–º–ø—Ç –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
enhanced_prompt = manager.get_prompt_with_metadata(prompt_id)
print(f"–ú–µ—Ç–∞–¥–∞–Ω—ñ: {enhanced_prompt.metadata}")

# –û—Ç—Ä–∏–º—É—î–º–æ –ø—Ä–æ–º–ø—Ç–∏ –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
prompts = manager.get_prompts_by_category_with_metadata("system")
for prompt in prompts:
    print(f"{prompt.name}: {prompt.metadata['usage_count']} –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—å")
```

## üéØ –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø—Ä–æ–º–ø—Ç—ñ–≤

### –°–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π

```python
from src.prompt_descriptions import PromptCategory

# –î–æ—Å—Ç—É–ø–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
categories = [
    PromptCategory.SYSTEM,              # –°–∏—Å—Ç–µ–º–Ω—ñ –ø—Ä–æ–º–ø—Ç–∏
    PromptCategory.INTENT_ANALYSIS,     # –ê–Ω–∞–ª—ñ–∑ –Ω–∞–º—ñ—Ä—É
    PromptCategory.ERROR_HANDLING,      # –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
    PromptCategory.RESPONSE_FORMATTING, # –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
    PromptCategory.DATA_RETRIEVAL,      # –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
    PromptCategory.DATA_CREATION,       # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
    PromptCategory.DATA_UPDATE,         # –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
    PromptCategory.DATA_DELETION,       # –í–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
    PromptCategory.VALIDATION,          # –í–∞–ª—ñ–¥–∞—Ü—ñ—è
    PromptCategory.DEBUGGING,           # –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è
    PromptCategory.USER_DEFINED         # –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ
]
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î –∫–∞—Ç–µ–≥–æ—Ä—ñ—é –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–∞–ø–∏—Ç—É:

```python
# –ü—Ä–∏–∫–ª–∞–¥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
"–ü–æ–∫–∞–∂–∏ –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏" ‚Üí DATA_RETRIEVAL
"–°—Ç–≤–æ—Ä–∏ –Ω–æ–≤–∏–π —Ç–æ–≤–∞—Ä" ‚Üí DATA_CREATION
"–û–Ω–æ–≤–∏ —Ç–æ–≤–∞—Ä –∑ ID 123" ‚Üí DATA_UPDATE
"–í–∏–¥–∞–ª–∏ —Ç–æ–≤–∞—Ä –∑ ID 456" ‚Üí DATA_DELETION
"–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ" ‚Üí ERROR_HANDLING
```

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞

### –î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```python
stats = manager.get_prompt_statistics()

print(f"–ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:")
print(f"  ‚Ä¢ –í—Å—å–æ–≥–æ –ø—Ä–æ–º–ø—Ç—ñ–≤: {stats['total_prompts']}")
print(f"  ‚Ä¢ –ê–∫—Ç–∏–≤–Ω–∏—Ö –ø—Ä–æ–º–ø—Ç—ñ–≤: {stats['active_prompts']}")
print(f"  ‚Ä¢ –°–µ—Ä–µ–¥–Ω—è —É—Å–ø—ñ—à–Ω—ñ—Å—Ç—å: {stats['avg_success_rate']:.2%}")

print(f"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö:")
for category, cat_stats in stats['category_details'].items():
    if cat_stats['count'] > 0:
        print(f"  ‚Ä¢ {category}: {cat_stats['count']} –ø—Ä–æ–º–ø—Ç—ñ–≤")
```

### –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ—Å—Ç—å –ø—Ä–æ–º–ø—Ç—ñ–≤

–°–∏—Å—Ç–µ–º–∞ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ:

1. **–£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å** (40%) - –≤—ñ–¥—Å–æ—Ç–æ–∫ —É—Å–ø—ñ—à–Ω–∏—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—å
2. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è** (30%) - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—å (–Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω–∞)
3. **–°—Ö–æ–∂—ñ—Å—Ç—å —Ç–µ–∫—Å—Ç—É** (30%) - —Å–µ–º–∞–Ω—Ç–∏—á–Ω–∞ —Å—Ö–æ–∂—ñ—Å—Ç—å –∑ –∑–∞–ø–∏—Ç–æ–º

```python
# –ü—Ä–∏–∫–ª–∞–¥ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—ñ
relevance_score = (
    prompt.success_rate * 0.4 +
    min(prompt.usage_count / 100.0, 1.0) * 0.3 +
    text_similarity * 0.3
)
```

## üíæ –ï–∫—Å–ø–æ—Ä—Ç —Ç–∞ —ñ–º–ø–æ—Ä—Ç

### –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
manager.save_prompt_config()

# –ï–∫—Å–ø–æ—Ä—Ç –≤ JSON
manager.export_prompts_to_file("my_prompts.json", "json")

# –ï–∫—Å–ø–æ—Ä—Ç –≤ YAML
manager.export_prompts_to_file("my_prompts.yaml", "yaml")
```

### –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

```python
# –Ü–º–ø–æ—Ä—Ç –∑ JSON
manager.import_prompts_from_file("my_prompts.json", "json")

# –Ü–º–ø–æ—Ä—Ç –∑ YAML
manager.import_prompts_from_file("my_prompts.yaml", "yaml")
```

### –§–æ—Ä–º–∞—Ç –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

```json
{
  "prompts": [
    {
      "name": "Custom Prompt",
      "description": "–û–ø–∏—Å –ø—Ä–æ–º–ø—Ç—É",
      "prompt_text": "–¢–µ–∫—Å—Ç –ø—Ä–æ–º–ø—Ç—É...",
      "category": "data_retrieval",
      "tags": ["custom", "data"],
      "metadata": {
        "usage_count": 10,
        "success_rate": 0.85,
        "created_at": "2024-01-01T12:00:00",
        "updated_at": "2024-01-15T14:30:00"
      }
    }
  ],
  "categories": {
    "data_retrieval": {
      "name": "data_retrieval",
      "description": "–ü—Ä–æ–º–ø—Ç–∏ –¥–ª—è data_retrieval",
      "prompt_count": 5,
      "tags": ["data", "retrieval"]
    }
  },
  "settings": {
    "default_category": {
      "value": "user_defined",
      "description": "–ö–∞—Ç–µ–≥–æ—Ä—ñ—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º"
    }
  },
  "last_updated": "2024-01-15T15:00:00"
}
```

## üîß –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ—Å–Ω—É—é—á–æ—é —Å–∏—Å—Ç–µ–º–æ—é

### –ó–∞–º—ñ–Ω–∞ –±–∞–∑–æ–≤–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞

```python
# –ë—É–ª–æ
from src.dynamic_prompt_manager import DynamicPromptManager
manager = DynamicPromptManager()

# –°—Ç–∞–ª–æ
from src.enhanced_prompt_manager import EnhancedPromptManager
manager = EnhancedPromptManager()
```

### –ó–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å

–ü–æ–∫—Ä–∞—â–µ–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–≤–Ω—ñ—Å—Ç—é —Å—É–º—ñ—Å–Ω–∏–π –∑ –±–∞–∑–æ–≤–∏–º:

```python
# –í—Å—ñ –º–µ—Ç–æ–¥–∏ –±–∞–∑–æ–≤–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø—Ä–∞—Ü—é—é—Ç—å
prompt_id = manager.add_prompt(prompt)
prompt = manager.get_prompt(prompt_id)
prompts = manager.get_prompts_by_category("system")
```

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

```python
# –ù–æ–≤—ñ –º–µ—Ç–æ–¥–∏ –ø–æ–∫—Ä–∞—â–µ–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
enhanced_prompt = manager.get_prompt_with_metadata(prompt_id)
suggestions = manager.get_prompt_suggestions(user_query)
stats = manager.get_prompt_statistics()
manager.save_prompt_config()
```

## üéØ –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ü—Ä–∏–∫–ª–∞–¥ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç—É

```python
from src.enhanced_prompt_manager import EnhancedPromptManager, EnhancedPromptTemplate

manager = EnhancedPromptManager()

# –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Å—Ç–æ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç
custom_prompt = EnhancedPromptTemplate(
    name="Custom Data Retrieval",
    description="–ö–∞—Å—Ç–æ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö",
    prompt_text="""
–¢–∏ –µ–∫—Å–ø–µ—Ä—Ç API. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ö–æ—á–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ.

–ó–ê–ü–ò–¢: {user_query}

–ó–ê–í–î–ê–ù–ù–Ø:
1. –ó–Ω–∞–π–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π GET endpoint
2. –ü–µ—Ä–µ–≤—ñ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
3. –í–∏–∫–æ–Ω–∞–π –∑–∞–ø–∏—Ç
4. –ü–æ–≤–µ—Ä–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–í–Ü–î–ü–û–í–Ü–î–¨:
{{
    "endpoint": "URL endpoint",
    "method": "GET",
    "parameters": {{}},
    "result": "—Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–∏—Ç—É"
}}
    """,
    category="data_retrieval",
    tags=["custom", "data", "retrieval"]
)

prompt_id = manager.add_enhanced_prompt(custom_prompt)
print(f"‚úÖ –î–æ–¥–∞–Ω–æ –ø—Ä–æ–º–ø—Ç –∑ ID: {prompt_id}")
```

### –ü—Ä–∏–∫–ª–∞–¥ 2: –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π

```python
# –û—Ç—Ä–∏–º—É—î–º–æ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
queries = [
    "–ü–æ–∫–∞–∂–∏ –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏",
    "–°—Ç–≤–æ—Ä–∏ –Ω–æ–≤–∏–π —Ç–æ–≤–∞—Ä",
    "–û–Ω–æ–≤–∏ —Ç–æ–≤–∞—Ä –∑ ID 123",
    "–í–∏–¥–∞–ª–∏ —Ç–æ–≤–∞—Ä –∑ ID 456"
]

for query in queries:
    suggestions = manager.get_prompt_suggestions(query)
    print(f"\nüìù –ó–∞–ø–∏—Ç: {query}")
    print(f"üéØ –ó–Ω–∞–π–¥–µ–Ω–æ {len(suggestions)} –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π:")

    for i, suggestion in enumerate(suggestions[:3], 1):
        print(f"  {i}. {suggestion['name']}")
        print(f"     –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ—Å—Ç—å: {suggestion['relevance_score']:.2f}")
        print(f"     –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å: {suggestion['success_rate']:.2%}")
```

### –ü—Ä–∏–∫–ª–∞–¥ 3: –†–æ–±–æ—Ç–∞ –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏

```python
# –û—Ç—Ä–∏–º—É—î–º–æ –ø—Ä–æ–º–ø—Ç –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
enhanced_prompt = manager.get_prompt_with_metadata(prompt_id)

if enhanced_prompt:
    print(f"üìã –ü—Ä–æ–º–ø—Ç: {enhanced_prompt.name}")
    print(f"üìä –ú–µ—Ç–∞–¥–∞–Ω—ñ:")
    print(f"  ‚Ä¢ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: {enhanced_prompt.metadata.get('usage_count', 0)}")
    print(f"  ‚Ä¢ –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å: {enhanced_prompt.metadata.get('success_rate', 0):.2%}")
    print(f"  ‚Ä¢ –°—Ç–≤–æ—Ä–µ–Ω–æ: {enhanced_prompt.metadata.get('created_at', '–ù–µ–≤—ñ–¥–æ–º–æ')}")
    print(f"  ‚Ä¢ –û–Ω–æ–≤–ª–µ–Ω–æ: {enhanced_prompt.metadata.get('updated_at', '–ù–µ–≤—ñ–¥–æ–º–æ')}")

# –û—Ç—Ä–∏–º—É—î–º–æ –ø—Ä–æ–º–ø—Ç–∏ –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
system_prompts = manager.get_prompts_by_category_with_metadata("system")
print(f"\nüîß –°–∏—Å—Ç–µ–º–Ω–∏—Ö –ø—Ä–æ–º–ø—Ç—ñ–≤: {len(system_prompts)}")

for prompt in system_prompts:
    usage = prompt.metadata.get('usage_count', 0)
    success = prompt.metadata.get('success_rate', 0)
    print(f"  ‚Ä¢ {prompt.name}: {usage} –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—å, {success:.2%} —É—Å–ø—ñ—à–Ω—ñ—Å—Ç—å")
```

### –ü—Ä–∏–∫–ª–∞–¥ 4: –ï–∫—Å–ø–æ—Ä—Ç —Ç–∞ —ñ–º–ø–æ—Ä—Ç

```python
# –ï–∫—Å–ø–æ—Ä—Ç—É—î–º–æ –ø–æ—Ç–æ—á–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
manager.save_prompt_config()
manager.export_prompts_to_file("backup_prompts.json", "json")

# –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä
new_manager = EnhancedPromptManager("new_prompts.db")

# –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
new_manager.import_prompts_from_file("backup_prompts.json", "json")

print("‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–∞ —Ç–∞ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–∞")
```

## üîÆ –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### –ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

1. **–ú–∞—à–∏–Ω–Ω–µ –Ω–∞–≤—á–∞–Ω–Ω—è**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—ñ–≤
   - –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü—ñ—è —Å—Ö–æ–∂–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
   - A/B —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—ñ–≤

2. **–†–æ–∑—à–∏—Ä–µ–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞**
   - –ì—Ä–∞—Ñ—ñ–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
   - –¢—Ä–µ–Ω–¥–∏ —É—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ
   - –ü—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

3. **–ö–æ–ªaborative —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è**
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Å—Ö–æ–∂–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
   - –°–ø—ñ–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—ñ–≤
   - –†–µ–π—Ç–∏–Ω–≥–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞

4. **–í–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è**
   - –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω –ø—Ä–æ–º–ø—Ç—ñ–≤
   - –í—ñ–¥–∫–∞—Ç –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –≤–µ—Ä—Å—ñ–π
   - –Ü—Å—Ç–æ—Ä—ñ—è –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ–π

5. **API –¥–ª—è –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å–∏—Å—Ç–µ–º**
   - REST API –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ–º–ø—Ç–∞–º–∏
   - Webhook –¥–ª—è —Å–ø–æ–≤—ñ—â–µ–Ω—å
   - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## üìù –í–∏—Å–Ω–æ–≤–∫–∏

–ü–æ–∫—Ä–∞—â–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–ø—Ç—ñ–≤ –Ω–∞–¥–∞—î:

- **–ö—Ä–∞—â—É –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—é** - –º–µ—Ç–∞–¥–∞–Ω—ñ —Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—é** - –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó —Ç–∞ —à–∞–±–ª–æ–Ω–∏
- **–ê–Ω–∞–ª—ñ—Ç–∏–∫—É** - –¥–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–ì–Ω—É—á–∫—ñ—Å—Ç—å** - –µ–∫—Å–ø–æ—Ä—Ç/—ñ–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- **–°—É–º—ñ—Å–Ω—ñ—Å—Ç—å** - –∑–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ –±–∞–∑–æ–≤–æ—é —Å–∏—Å—Ç–µ–º–æ—é

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∞ –ø–æ–¥–∞–ª—å—à–æ–≥–æ —Ä–æ–∑–≤–∏—Ç–∫—É.

---

**–ê–≤—Ç–æ—Ä:** AI Assistant
**–î–∞—Ç–∞:** 2024
**–í–µ—Ä—Å—ñ—è:** 2.0
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
