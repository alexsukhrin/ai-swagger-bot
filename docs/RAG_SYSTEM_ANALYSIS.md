# –ê–Ω–∞–ª—ñ–∑ RAG —Å–∏—Å—Ç–µ–º–∏ –≤ AI Swagger Bot

## üìã –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è

### 1. –ß–∏ –ø–∞—Ä—Å–∏–º–æ –º–∏ –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É Swagger?

**–ù–Ü, –Ω–µ –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É.** –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –Ω–∞—Å—Ç—É–ø–Ω–∏–º —á–∏–Ω–æ–º:

#### –ü—Ä–æ—Ü–µ—Å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó:
1. **–ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É** - –ø–∞—Ä—Å–∏—Ç—å—Å—è Swagger —Ñ–∞–π–ª —ñ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –≤–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞
2. **–ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∑–∞–ø—É—Å–∫–∞—Ö** - –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è —ñ—Å–Ω—É—é—á–∞ –±–∞–∑–∞ –∑ –¥–∏—Å–∫—É

#### –ö–æ–¥ –≤ `rag_engine.py`:
```python
def _initialize_vectorstore(self):
    """–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–µ–∫—Ç–æ—Ä–Ω–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö."""
    try:
        # –°–ø—Ä–æ–±—É—î–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —ñ—Å–Ω—É—é—á—É –±–∞–∑—É
        if not self.load_vectorstore():
            # –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤—É –±–∞–∑—É
            self._create_vectorstore_from_swagger()
    except Exception as e:
        print(f"–ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≤–µ–∫—Ç–æ—Ä–Ω–æ—ó –±–∞–∑–∏: {e}")
```

### 2. –î–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –µ–º–±–µ–¥—ñ–Ω–≥–∏?

#### –§—ñ–∑–∏—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è:
- **–î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è**: `./chroma_db/`
- **SQLite –±–∞–∑–∞**: `chroma_db/chroma.sqlite3` (1.22 MB)
- **–ë—ñ–Ω–∞—Ä–Ω—ñ —Ñ–∞–π–ª–∏**: `chroma_db/22d97def-cb41-4ebe-a3c6-03681d7a7004/`
  - `data_level0.bin` (6.1 MB) - —Å–∞–º—ñ –≤–µ–∫—Ç–æ—Ä–∏
  - `length.bin` (3.9 KB) - —ñ–Ω–¥–µ–∫—Å–∏
  - `header.bin` (100 B) - –º–µ—Ç–∞–¥–∞–Ω—ñ

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö:
```python
# –í SQLite –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è:
- embeddings (–≤–µ–∫—Ç–æ—Ä–∏)
- documents (—Ç–µ–∫—Å—Ç–∏)
- metadatas (–º–µ—Ç–∞–¥–∞–Ω—ñ endpoints)
```

### 3. –ß–∏ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ñ–π –ø–∞–º'—è—Ç—ñ?

**–¢–ê–ö, –ø—ñ–¥ —á–∞—Å —Ä–æ–±–æ—Ç–∏.** –ï–º–±–µ–¥—ñ–Ω–≥–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –≤ –ø–∞–º'—è—Ç—å –ø—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó:

```python
def load_vectorstore(self) -> bool:
    """–ó–∞–≤–∞–Ω—Ç–∞–∂—É—î —ñ—Å–Ω—É—é—á—É –≤–µ–∫—Ç–æ—Ä–Ω—É –±–∞–∑—É."""
    try:
        if os.path.exists(self.persist_directory):
            self.vectorstore = Chroma(
                persist_directory=self.persist_directory,
                embedding_function=self.embeddings
            )
            return True
    except Exception as e:
        print(f"–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–Ω–æ—ó –±–∞–∑–∏: {e}")
    return False
```

### 4. –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω?

#### –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:
```bash
python check_rag_status.py
```

#### –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:
- ‚úÖ **Chroma –±–∞–∑–∞ –¥–∞–Ω–∏—Ö**: 98 –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤, 1.22 MB
- ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥ Swagger**: 80 endpoints
- ‚ùå **–ï–º–±–µ–¥—ñ–Ω–≥–∏ –≤ –ø–∞–º'—è—Ç—ñ**: –ø–æ—Ç—Ä–µ–±—É—î OPENAI_API_KEY
- ‚ùå **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –µ–º–±–µ–¥—ñ–Ω–≥—ñ–≤**: –ø–æ—Ç—Ä–µ–±—É—î OPENAI_API_KEY

### 5. –Ø–∫ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è RAG?

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:
1. **–ü—Ä–∏ –∑–º—ñ–Ω—ñ Swagger —Ñ–∞–π–ª—É** - –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
2. **–ü—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –Ω–æ–≤–∏—Ö endpoints** - –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ —Ñ–∞–π–ª

#### –†—É—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:
```python
# –û—á–∏—Å—Ç–∏—Ç–∏ –±–∞–∑—É
rag_engine.clear_database()

# –ü–µ—Ä–µ—Å—Ç–≤–æ—Ä–∏—Ç–∏
rag_engine._create_vectorstore_from_swagger()
```

## üîß –¢–µ—Ö–Ω—ñ—á–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –ü—Ä–æ—Ü–µ—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–º–±–µ–¥—ñ–Ω–≥—ñ–≤:

1. **–ü–∞—Ä—Å–∏–Ω–≥ Swagger** ‚Üí `SwaggerParser`
2. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è chunks** ‚Üí `_create_vectorstore_from_swagger()`
3. **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –µ–º–±–µ–¥—ñ–Ω–≥—ñ–≤** ‚Üí `OpenAIEmbeddings`
4. **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ Chroma** ‚Üí `Chroma.from_documents()`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ chunks:
```python
chunk = {
    'text': f"""
    Endpoint: {endpoint.method} {endpoint.path}
    Summary: {endpoint.summary}
    Description: {endpoint.description}
    Parameters: ...
    Request Body: ...
    Responses: ...
    """,
    'metadata': {
        'path': endpoint.path,
        'method': endpoint.method,
        'summary': endpoint.summary,
        'tags': ', '.join(endpoint.tags)
    }
}
```

## üìä –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω —Å–∏—Å—Ç–µ–º–∏

### –©–æ –ø—Ä–∞—Ü—é—î:
- ‚úÖ Swagger –ø–∞—Ä—Å–∏–Ω–≥ (80 endpoints)
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ Chroma DB (98 –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

### –©–æ –ø–æ—Ç—Ä–µ–±—É—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
- ‚ùå OPENAI_API_KEY –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –µ–º–±–µ–¥—ñ–Ω–≥—ñ–≤
- ‚ùå –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ SQLite —Å—Ö–µ–º–∏ (–∫–æ–ª–æ–Ω–∫–∞ metadata)

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API –∫–ª—é—á–∞:
```bash
export OPENAI_API_KEY="your-api-key-here"
```

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏:
```bash
conda activate ai-swagger
python check_rag_status.py
```

### 3. –û–Ω–æ–≤–ª–µ–Ω–Ω—è Swagger:
```python
# –í –∫–æ–¥—ñ
rag_engine.clear_database()
rag_engine._create_vectorstore_from_swagger()
```

## üìà –í–∏—Å–Ω–æ–≤–∫–∏

1. **Swagger –ø–∞—Ä—Å–∏—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑** –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –±–∞–∑–∏
2. **–ï–º–±–µ–¥—ñ–Ω–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è** –≤ `./chroma_db/` –Ω–∞ –¥–∏—Å–∫—É
3. **–í –ø–∞–º'—è—Ç—ñ** –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –ø—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
4. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞–Ω** –º–æ–∂–Ω–∞ —á–µ—Ä–µ–∑ `check_rag_status.py`
5. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è** –ø–æ—Ç—Ä–µ–±—É—î –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –∞–±–æ —Ä—É—á–Ω–æ–≥–æ –æ—á–∏—â–µ–Ω–Ω—è –±–∞–∑–∏

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, –∞–ª–µ –ø–æ—Ç—Ä–µ–±—É—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API –∫–ª—é—á–∞ –¥–ª—è –ø–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ.
